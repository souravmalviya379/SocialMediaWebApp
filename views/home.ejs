<link rel="stylesheet" href="/css/home.css">

<h1>Welcome to SocialApp</h1>

<div id="home-container">
   <section id="feed-posts">
      <h4>Posts</h4>
      <% if(locals.user){ %>
         <form action="/posts/create" id="new-post-form" method="POST">
            <textarea name="content" cols="30" rows="3" placeholder="Post Here......" id="post-content" required></textarea>
            <input type="submit" value="Post">
         </form>
         <% } %>
            <div id="posts-display">
               <ul>
                  <% for(let post of posts){ %>
                     <li id="post-<%= post._id %>">
                        <p>
                           <% if(locals.user && locals.user.id===post.user.id){ %>
                              <a class='delete-post-button' href="/posts/destroy/<%= post._id %>" style="color: blue;"> Delete </a>
                              <small>
                                 <%= post.user.fname %>
                              </small>
                              <% } %>

                                 <%= post.content %>
                        </p>
                        <div id="post-comments">
                           <% if(locals.user){ %>
                              <form action="/comments/create" method="POST">
                                 <input type="text" name="content" placeholder="Comment here ...." required>
                                 <input type="hidden" name="post" value='<%= post._id %>'>
                                 <input type="submit" value="Add Comment">
                              </form>
                              <% } %>
                        </div>

                        <div id="post-comments-list">
                           <ul id="post-comments-<%= post._id %>">
                              <% for(let comment of post.comments) { %>
                                 <p>
                                    <% if(locals.user && locals.user.id===post.user.id){ %>
                                       <a href="comments/destroy/<%= comment.id %>" style="color: blue;">
                                          Delete </a>
                                    <% } %>
                                          <%= comment.content %>
                                             <br>
                                             <small>
                                                <%= comment.user.fname %>
                                             </small>
                                 </p>
                              <% } %>
                           </ul>
                        </div>

                     </li>
                     <% } %>
               </ul>
            </div>


   </section>

   <section id="user-friends">
      <h4>Friends</h4>
      <% for(let u of all_users){ %>
         <p>
            <a href="users/profile/<%= u.id %>">
               <%= u.fname %>
            </a>
         </p>
         <% } %>
   </section>

</div>
<script src="/js/home_posts.js"></script>









<!-- 
</body>
</html>   after studying layouts no need of this html containers just write body part in this files which will be replaced by body in layout page-->