let createPost=function(){let e=$("#new-post-form");e.submit((function(t){t.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:e.serialize(),success:function(e){let t=newPostDom(e.data.post);$("#posts-display>ul").prepend(t),deletePost($(" .delete-post-button",t))},error:function(e){console.log(e.responseText)}})}))},newPostDom=function(e){return $(`<li id="post-${e._id}">\n            <p>\n               <a class='delete-post-button' href="/posts/destroy/${e._id}" style="color: blue;"> X </a>\n               <small>\n                  ${e.user.fname}\n               </small>\n\n               ${e.content}\n            </p>\n            <div id="post-comments">\n               <form action="/comments/create" method="POST">\n                  <input type="text" name="content" placeholder="Comment here ...."   required>\n                  <input type="hidden" name="post" value='${e._id}'>\n                  <input type="submit" value="Add Comment">\n               </form>\n            </div>\n\n            <div id="post-comments-list">\n               <ul id="post-comments-${e._id}">\n               \n               </ul>\n            </div>\n        </li>`)},deletePost=function(e){$(e).click((function(t){t.preventDefault(),$.ajax({type:"get",url:$(e).prop("href"),success:function(e){$(`#post-${e.data.post_id}`).remove()},error:function(e){console.log("Error: ",e.responseText)}})}))};createPost();